YUI.add("moodle-atto_studietube-button",function(Y,NAME){var COMPONENTNAME="atto_studietube",IMAGETEMPLATE='<img src="{{url}}" alt="{{alt}}" {{#if width}}width="{{width}}" {{/if}}{{#if height}}height="{{height}}" {{/if}}{{#if presentation}}role="presentation" {{/if}}style="{{alignment}}{{margin}}{{customstyle}}"{{#if classlist}}class="{{classlist}}" {{/if}}{{#if id}}id="{{id}}" {{/if}}/>';Y.namespace("M.atto_studietube").Button=Y.Base.create("button",Y.M.editor_atto.EditorPlugin,[],{_currentSelection:null,initializer:function(){var t=this;window.addEventListener("message",function(e){t._handleMedia(e,t)},!1),this.addButton({icon:"studietube",iconComponent:COMPONENTNAME,callback:this._displayDialogue})},_displayDialogue:function(e){var t=this.getDialogue({headerContent:"Studietube",width:"600px",height:"500px",focusAfterHide:!0}),i=Y.Node.create("<iframe></iframe>");i.setStyles({height:"400px",border:"none",width:"100%"}),i.setAttribute("src","//www.skoletube.dk/app/bluebird/1?passtype=direct&idcaller="+this.editor._yuid),t.set("bodyContent",i).show(),this.markUpdated()},_handleMedia:function(event,obj){if("https://www.skoletube.dk"===event.origin||"http://www.skoletube.dk"===event.origin){var host=obj.get("host"),self=obj;ret=eval(event.data),"undefined"!=typeof ret[3]&&ret[3]===obj.editor._yuid&&(newhtml=Y.Node.create('<iframe src="'+ret[2]+'" width="480" height="390" frameborder="0" allowfullscreen></iframe>'),self.editor.appendChild(newhtml),this.getDialogue({focusAfterHide:null}).hide())}}},{ATTRS:{disabled:{value:!0},area:{value:{}}}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});
