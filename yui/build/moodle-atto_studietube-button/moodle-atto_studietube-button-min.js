YUI.add("moodle-atto_studietube-button",function(i,t){i.namespace("M.atto_studietube").Button=i.Base.create("button",i.M.editor_atto.EditorPlugin,[],{_currentSelection:null,initializer:function(){var e=this;window.addEventListener("message",function(t){e._handleMedia(t,e)},!1),this.addButton({icon:"studietube",iconComponent:"atto_studietube",callback:this._displayDialogue})},_displayDialogue:function(){var t=this.getDialogue({headerContent:"Studietube",width:"600px",height:"500px",focusAfterHide:!0}),e=i.Node.create("<iframe></iframe>");e.setStyles({height:"400px",border:"none",width:"100%"}),e.setAttribute("src","//www.studietube.dk/app/bluebird/1?passtype=direct&notok=true&idcaller="+this.editor._yuid),t.set("bodyContent",e).show(),this.markUpdated()},_handleMedia:function(t,e){this.getDialogue({focusAfterHide:null}).hide(),"https://www.studietube.dk"!==t.origin&&"http://www.studietube.dk"!==t.origin&&"http://www.skoletube.dk"!==t.origin&&"https://www.skoletube.dk"!==t.origin||"undefined"!=typeof(t=JSON.parse(t.data))[3]&&t[3].includes(e.editor._yuid)&&(e="",this.get("full")?(e='<div style="width:100%;height:0;position:relative;padding-bottom:56.25%;">',e+='<iframe src="//www.studietube.dk/e/'+t[0]+'/0" ',e+='style="width:100%;height:100%;position:absolute;top:0;left:0;" allowfullscreen webkitallowfullscreen ',e+='mozAllowFullScreen frameborder="0" allow="encrypted-media"></iframe></div>'):(e='<div><img class="studietube" id="'+t[0]+'" ',e+='src="//www.studietube.dk/t/'+t[0]+'"></div>'),this.get("host").insertContentAtFocusPoint(e),this.markUpdated())}},{ATTRS:{full:{value:!1}}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});